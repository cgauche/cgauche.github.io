import{h as j,j as e,C as p,a as N,b as f,d as v,f as q,r as i,g as r,ae as w,af as B}from"./index-DPNhxiUx.js";import{o as R,n as o,l as h,u as H}from"./constants--7Vy3u4O.js";import{t as c}from"./testId-C2BDkHTB.js";import{g as P}from"./spellUtils-DntvT4X5.js";import{c as z,g as F,a as O}from"./calculators-SnRFNRCc.js";import{C as V}from"./coins-BbqHfTwk.js";const Y=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]],U=j("backpack",Y);const W=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],X=j("heart",W);const G=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],K=j("swords",G);const Z=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],J=j("user",Z);const Q=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ee=j("zap",Q);function g(t,n){return t.details.find(s=>s.type===n)?.value}function x(t,n){return t.characteristics.find(d=>d.id===n)}function re({character:t}){const n=g(t,"Nom")??"Sans nom",d=g(t,"Age"),s=g(t,"Taille"),l=g(t,"Cheveux"),a=g(t,"Yeux");return e.jsxs(p,{"data-testid":"summary-identity",children:[e.jsx(N,{className:"pb-2",children:e.jsxs(f,{className:"text-2xl flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),e.jsx("span",{"data-testid":"summary-character-name",children:n})]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-muted/50 rounded p-2",children:[e.jsx("span",{className:"text-muted-foreground block text-xs",children:"Race"}),e.jsx("span",{className:"font-medium",children:t.specie?.data?.label??"-"})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-2",children:[e.jsx("span",{className:"text-muted-foreground block text-xs",children:"Classe"}),e.jsx("span",{className:"font-medium",children:t.careerLevel?.class??"-"})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-2",children:[e.jsx("span",{className:"text-muted-foreground block text-xs",children:"Carriere"}),e.jsx("span",{className:"font-medium",children:t.careerLevel?.career??"-"})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-2",children:[e.jsx("span",{className:"text-muted-foreground block text-xs",children:"Niveau"}),e.jsx("span",{className:"font-medium",children:t.careerLevel?.data.label??"-"})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-2",children:[e.jsx("span",{className:"text-muted-foreground block text-xs",children:"Statut"}),e.jsx("span",{className:"font-medium",children:t.careerLevel?.status??"-"})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-2",children:[e.jsx("span",{className:"text-muted-foreground block text-xs",children:"Signe astral"}),e.jsx("span",{className:"font-medium",children:t.star?.data.label??"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[d!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Age:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[d," ans"]})]}),s!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Taille:"}),e.jsx("span",{className:"ml-2 font-medium",children:s})]}),l!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cheveux:"}),e.jsx("span",{className:"ml-2 font-medium",children:l})]}),a!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Yeux:"}),e.jsx("span",{className:"ml-2 font-medium",children:a})]})]})]})]})}function ce({character:t}){const n=q(s=>s.characteristic),d=i.useMemo(()=>n.filter(s=>s.type===R.MAIN).sort((s,l)=>s.index-l.index),[n]);return e.jsxs(p,{children:[e.jsx(N,{className:"pb-2",children:e.jsxs(f,{className:"text-base flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Caracteristiques"]})}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid gap-1 text-xs text-muted-foreground mb-1 text-center",style:{gridTemplateColumns:`auto repeat(${d.length}, 1fr)`},children:[e.jsx("div",{}),d.map(s=>e.jsx("div",{className:"font-medium",children:s.abr||s.label.slice(0,2)},s.label))]}),e.jsxs("div",{className:"grid gap-1 text-sm text-center mb-1",style:{gridTemplateColumns:`auto repeat(${d.length}, 1fr)`},children:[e.jsx("div",{className:"text-xs text-muted-foreground text-left",children:"Init"}),d.map(s=>{const l=x(t,s.label);return e.jsx("div",{"data-testid":c("summary-char-init",s.label),className:"bg-muted/30 rounded py-0.5",children:l?.base??"-"},s.label)})]}),e.jsxs("div",{className:"grid gap-1 text-sm text-center mb-1",style:{gridTemplateColumns:`auto repeat(${d.length}, 1fr)`},children:[e.jsx("div",{className:"text-xs text-muted-foreground text-left",children:"Aug"}),d.map(s=>{const a=x(t,s.label)?.advance??0;return e.jsx("div",{"data-testid":c("summary-char-aug",s.label),className:"bg-muted/30 rounded py-0.5",children:a>0?`+${a}`:"-"},s.label)})]}),e.jsxs("div",{className:"grid gap-1 text-sm text-center font-bold",style:{gridTemplateColumns:`auto repeat(${d.length}, 1fr)`},children:[e.jsx("div",{className:"text-xs text-muted-foreground text-left font-normal",children:"Total"}),d.map(s=>{const l=x(t,s.label),a=l?o(l):0;return e.jsx("div",{"data-testid":c("summary-char-total",s.label),className:"bg-primary/10 rounded py-0.5",children:a},s.label)})]})]})]})}function ie({character:t}){const n=q(y=>y.characteristic),d=x(t,h.MOVEMENT),s=d?o(d):4,l=x(t,h.FATE),a=l?o(l):0,m=x(t,h.LUCK),D=m?o(m):a,A=x(t,h.RESILIENCE),S=A?o(A):0,k=x(t,h.RESOLVE),I=k?o(k):S,b=i.useMemo(()=>{const y=t.specie?.data.refChar||"Humain",L=n.find(u=>u.label===h.WOUNDS),M={};for(const u of t.characteristics)M[u.id]=o(u);const _=z(M,n),C=F(L,y),T=C?O(C,_):0,E=t.talents.find(u=>u.id===H.HARDY),$=E?P(E):0;return{formula:C||"BF+(2×BE)+BFM",baseWounds:T,hardyBonus:$,total:T+$}},[t,n]);return e.jsxs(p,{children:[e.jsx(N,{className:"pb-2",children:e.jsxs(f,{className:"text-base flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Caracteristiques secondaires"]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Mouvement"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1 text-center",children:[e.jsxs("div",{className:"bg-muted/50 rounded p-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"M"}),e.jsx("div",{className:"font-bold",children:s})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Mar"}),e.jsx("div",{className:"font-bold",children:s*2})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Crs"}),e.jsx("div",{className:"font-bold",children:s*4})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Destin / Chance"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-center",children:[e.jsxs("div",{className:"bg-muted/50 rounded p-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Dest"}),e.jsx("div",{className:"font-bold",children:a})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cha"}),e.jsx("div",{className:"font-bold",children:D})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Resilience / Determination"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-center",children:[e.jsxs("div",{className:"bg-muted/50 rounded p-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Res"}),e.jsx("div",{className:"font-bold",children:S})]}),e.jsxs("div",{className:"bg-muted/50 rounded p-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Det"}),e.jsx("div",{className:"font-bold",children:I})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Blessures"}),e.jsxs("div",{className:"bg-destructive/10 rounded p-2 text-center",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:[b.formula,b.hardyBonus>0&&` + DaC(${b.hardyBonus})`]}),e.jsx("div",{className:"font-bold text-lg text-destructive",children:b.total})]})]})]})})]})}function me({character:t,totalXp:n}){const d=n??t.xp.max;return e.jsxs(p,{children:[e.jsx(N,{className:"pb-2",children:e.jsx(f,{className:"text-base",children:"Experience"})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-green-500/10 rounded p-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Disponible"}),e.jsx("div",{className:"font-bold text-lg text-green-600",children:t.xp.available})]}),e.jsxs("div",{className:"bg-orange-500/10 rounded p-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Depensee"}),e.jsx("div",{className:"font-bold text-lg text-orange-600",children:t.xp.totalUsed})]}),e.jsxs("div",{className:"bg-primary/10 rounded p-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Totale"}),e.jsx("div",{className:"font-bold text-lg",children:d})]})]})})]})}function xe({skills:t}){const n=i.useMemo(()=>t.filter(s=>s.type==="base"&&s.totalAdvances>0).sort((s,l)=>s.label.localeCompare(l.label)),[t]),d=i.useMemo(()=>t.filter(s=>s.type==="avancée"&&s.totalAdvances>0).sort((s,l)=>s.label.localeCompare(l.label)),[t]);return n.length===0&&d.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune competence acquise"}):e.jsxs("div",{className:"space-y-4",children:[n.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:["Competences de base (",n.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 text-sm",children:n.map(s=>{const l=c("summary-skill",s.label);return e.jsxs("div",{"data-testid":l,className:"flex items-center justify-between py-1 px-2 rounded hover:bg-muted/50",children:[e.jsx("span",{className:"truncate",children:s.label}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground w-8",children:s.characteristic.slice(0,3)}),e.jsxs(r,{variant:"outline",className:"text-xs px-1.5 w-10 justify-center",children:["+",s.totalAdvances]}),e.jsx(r,{variant:"secondary",className:"text-xs px-1.5 w-10 justify-center font-bold",children:s.total})]})]},`${s.id}-${s.spec??""}`)})})]}),d.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:["Competences avancees (",d.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 text-sm",children:d.map(s=>{const l=c("summary-skill",s.label);return e.jsxs("div",{"data-testid":l,className:"flex items-center justify-between py-1 px-2 rounded hover:bg-muted/50",children:[e.jsx("span",{className:"truncate",children:s.label}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground w-8",children:s.characteristic.slice(0,3)}),e.jsxs(r,{variant:"outline",className:"text-xs px-1.5 w-10 justify-center",children:["+",s.totalAdvances]}),e.jsx(r,{variant:"secondary",className:"text-xs px-1.5 w-10 justify-center font-bold",children:s.total})]})]},`${s.id}-${s.spec??""}`)})})]})]})}function oe({talents:t}){const n=i.useMemo(()=>t.filter(d=>d.total>0).sort((d,s)=>d.label.localeCompare(s.label)),[t]);return n.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun talent acquis"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 text-sm",children:n.map(d=>{const s=c("summary-talent",d.label);return e.jsxs("div",{"data-testid":s,className:"flex items-center justify-between py-1 px-2 rounded hover:bg-muted/50",children:[e.jsx("span",{className:"truncate",children:d.label}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["max: ",d.max]}),e.jsxs(r,{variant:"secondary",className:"text-xs px-1.5",children:["x",d.total]})]})]},`${d.id}-${d.spec??""}`)})})}function ue({trappings:t,wallet:n}){const d=i.useMemo(()=>t.filter(a=>a.melee||a.ranged),[t]),s=i.useMemo(()=>t.filter(a=>a.armor),[t]),l=i.useMemo(()=>t.filter(a=>!a.melee&&!a.ranged&&!a.armor),[t]);return e.jsxs("div",{className:"space-y-4",children:[d.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(K,{className:"h-3.5 w-3.5"}),"Armes (",d.length,")"]}),e.jsx("div",{className:"space-y-1 text-sm",children:d.map((a,m)=>e.jsxs("div",{"data-testid":c("summary-equipment",a.label),className:"flex items-center justify-between py-1 px-2 rounded hover:bg-muted/50",children:[e.jsx("span",{className:"truncate font-medium",children:a.label}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2 text-xs text-muted-foreground",children:[a.melee&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Degats: ",a.melee.damage]}),e.jsxs("span",{children:["Allong: ",a.melee.reach]}),a.melee.qualities&&e.jsx("span",{className:"truncate max-w-32",children:a.melee.qualities})]}),a.ranged&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Degats: ",a.ranged.damage]}),e.jsxs("span",{children:["Portee: ",a.ranged.reach]}),a.ranged.qualities&&e.jsx("span",{className:"truncate max-w-32",children:a.ranged.qualities})]})]})]},`${a.id}-${m}`))})]}),s.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(w,{className:"h-3.5 w-3.5"}),"Armures (",s.length,")"]}),e.jsx("div",{className:"space-y-1 text-sm",children:s.map((a,m)=>e.jsxs("div",{"data-testid":c("summary-equipment",a.label),className:"flex items-center justify-between py-1 px-2 rounded hover:bg-muted/50",children:[e.jsx("span",{className:"truncate font-medium",children:a.label}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2 text-xs text-muted-foreground",children:a.armor&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"outline",className:"text-xs",children:["PA: ",a.armor.pa]}),e.jsxs("span",{children:["Loc: ",a.armor.loc]}),a.armor.qualities&&e.jsx("span",{className:"truncate max-w-32",children:a.armor.qualities})]})})]},`${a.id}-${m}`))})]}),l.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(U,{className:"h-3.5 w-3.5"}),"Possessions (",l.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 text-sm",children:l.map((a,m)=>e.jsxs("div",{"data-testid":c("summary-equipment",a.label),className:"flex items-center justify-between py-1 px-2 rounded hover:bg-muted/50",children:[e.jsx("span",{className:"truncate",children:a.label}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[a.quantity>1&&e.jsxs(r,{variant:"outline",className:"text-xs px-1.5",children:["x",a.quantity]}),a.enc>0&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Enc: ",a.totalEnc]})]})]},`${a.id}-${m}`))})]}),n&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(V,{className:"h-3.5 w-3.5"}),"Argent"]}),e.jsxs("div",{className:"flex gap-2",children:[n.gold>0&&e.jsxs(r,{variant:"default",className:"bg-yellow-600",children:[n.gold," CO"]}),n.silver>0&&e.jsxs(r,{variant:"default",className:"bg-slate-400",children:[n.silver," PA"]}),n.bronze>0&&e.jsxs(r,{variant:"default",className:"bg-orange-700",children:[n.bronze," sc"]}),n.gold===0&&n.silver===0&&n.bronze===0&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"Aucun argent"})]})]})]})}function he({spells:t}){const n=i.useMemo(()=>{const d=new Map;for(const s of t){const l=d.get(s.source)??[];l.push(s),d.set(s.source,l)}return d},[t]);return t.length===0?null:e.jsxs(p,{children:[e.jsx(N,{className:"pb-2",children:e.jsxs(f,{className:"text-base flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Sorts (",t.length,")"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:Array.from(n.entries()).map(([d,s])=>e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:d}),e.jsx("div",{className:"space-y-1",children:s.map(l=>e.jsxs("div",{"data-testid":c("summary-spell",l.label),className:"flex items-center justify-between py-1 px-2 rounded hover:bg-muted/50 text-sm",children:[e.jsx("span",{className:"font-medium",children:l.label}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs(r,{variant:"outline",className:"text-xs",children:["NI: ",l.cn]}),e.jsxs("span",{children:["Portee: ",l.range]}),e.jsxs("span",{children:["Duree: ",l.duration]})]})]},l.id))})]},d))})})]})}export{U as B,ce as C,ue as E,re as I,ie as S,oe as T,me as X,K as a,xe as b,he as c};
