import{h as C,j as s,C as l,a as m,b as x,g as M,d as p,c as u,S as y}from"./index-DPNhxiUx.js";import{a as S,b as v}from"./builderStore-eK4imx-H.js";import{C as w}from"./checkbox-gXCwxbfc.js";import{D as k}from"./dice-6-khfjXeaw.js";import"./constants--7Vy3u4O.js";import"./calculators-SnRFNRCc.js";import"./createCharacter-Bh61okBK.js";import"./PDFButton-DossJXaQ.js";const D=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],A=C("mouse-pointer",D);function E({step:r}){const{execute:n}=S(),{availableModes:h,currentMode:i,configurableSteps:c,stepModes:t}=r.data,o=r.actions.find(e=>e.role==="select"),d=r.actions.find(e=>e.id==="set-stepModes"),j=e=>{o&&n(o.id,e)},f=e=>{if(!d)return;const b=(t[e]??"random")==="random"?"manual":"random";n(d.id,{...t,[e]:b})},g=e=>{switch(e){case"guided":return s.jsx(A,{className:"h-8 w-8 text-primary"});case"random":return s.jsx(k,{className:"h-8 w-8 text-primary"});case"free":return s.jsx(y,{className:"h-8 w-8 text-primary"})}},N=e=>v(e)?.ui.label??e;return s.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h?.map(e=>s.jsxs(l,{"data-testid":`mode-${e.id}`,className:`cursor-pointer transition-all hover:border-primary ${i===e.id?"border-primary ring-2 ring-primary":""}`,onClick:()=>j(e.id),children:[s.jsx(m,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[g(e.id),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(x,{children:e.label}),e.recommended&&s.jsx(M,{variant:"secondary",className:"text-xs",children:"Recommandé"})]})]})}),s.jsx(p,{children:s.jsx(u,{className:"text-sm",children:e.description})})]},e.id))??s.jsx("p",{className:"text-muted-foreground col-span-2 text-center",children:"Aucun mode disponible"})}),i==="random"&&c&&s.jsxs(l,{children:[s.jsxs(m,{children:[s.jsx(x,{className:"text-base",children:"Configuration des étapes"}),s.jsx(u,{children:"Choisissez quelles étapes seront aléatoires ou manuelles"})]}),s.jsx(p,{children:s.jsx("div",{className:"space-y-3",children:c.map(e=>{const a=(t[e]??"random")==="random";return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[s.jsx("span",{className:"text-sm",children:N(e)}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w,{id:`step-${e}`,checked:a,onCheckedChange:()=>f(e)}),s.jsx("label",{htmlFor:`step-${e}`,className:"text-xs text-muted-foreground cursor-pointer",children:a?"Aléatoire":"Manuel"})]})]},e)})})})]})]})}export{E as default};
