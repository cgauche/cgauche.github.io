import{j as e,C as p,a as j,b as f,c as v,d as C,L as o,B as a,u as k,r as d}from"./index-B6PmHrA9.js";import{u as y}from"./useCharacterName-BWBPeT6c.js";import{u as t}from"./characterStore-CbFUcF02.js";import{i as I}from"./exportCharacter-bzZC3HJI.js";import"./PDFButton-cXuFwtr_.js";import{U as A}from"./upload-BZb2HjnK.js";import"./createCharacter-Bh61okBK.js";function D({character:s,onDuplicate:n}){const c=y(s);return e.jsxs(p,{children:[e.jsxs(j,{children:[e.jsx(f,{children:c}),e.jsx(v,{children:s.specie?.data.label||"Espèce non définie"})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.careerLevel?.career||"Carrière non définie"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{to:`/character/${s.saveName}`,className:"flex-1",children:e.jsx(a,{variant:"outline",className:"w-full",children:"Voir"})}),e.jsx(o,{to:`/character/${s.saveName}/edit`,className:"flex-1",children:e.jsx(a,{variant:"outline",className:"w-full",children:"Éditer"})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(a,{variant:"secondary",className:"w-full",onClick:n,children:"Dupliquer"})})]})]})}function V(){const s=k(),n=t(r=>r.characters),c=t(r=>r.loadAllCharacters);d.useEffect(()=>{c()},[c]);const N=t(r=>r.duplicateCharacter),g=t(r=>r.setCurrent),b=t(r=>r.saveCharacter),i=d.useRef(null),[m,u]=d.useState(null),E=()=>{i.current?.click()},w=async r=>{const x=r.target.files?.[0];if(x){u(null);try{const l=await x.text(),h=I(l);g(h),await b(),s(`/character/${h.saveName}`)}catch(l){u(l instanceof Error?l.message:"Erreur lors de l'import")}i.current&&(i.current.value="")}};return e.jsxs("div",{className:"container mx-auto p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Mes personnages"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:i,type:"file",accept:".json",onChange:w,className:"hidden"}),e.jsxs(a,{variant:"outline",onClick:E,children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Importer"]}),e.jsx(o,{to:"/create",children:e.jsx(a,{children:"Nouveau personnage"})})]})]}),m&&e.jsx("div",{className:"mb-4 p-4 bg-destructive/10 border border-destructive rounded-lg text-destructive text-sm",children:m}),n.length===0?e.jsxs(p,{children:[e.jsxs(j,{children:[e.jsx(f,{children:"Aucun personnage"}),e.jsx(v,{children:"Vous n'avez pas encore créé de personnage"})]}),e.jsx(C,{children:e.jsx(o,{to:"/create",children:e.jsx(a,{children:"Créer votre premier personnage"})})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(r=>e.jsx(D,{character:r,onDuplicate:()=>r.saveName&&N(r.saveName)},r.saveName))})]})}export{V as default};
