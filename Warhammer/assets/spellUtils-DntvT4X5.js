import{n}from"./constants--7Vy3u4O.js";function s(c){return c.spec?`${c.id} (${c.spec})`:c.id}function t(c){return c.advance+c.tmpadvance}function l(c,a){const e=c.max;if(e==="Aucun")return 99;const r=parseInt(e,10);if(!isNaN(r))return r;const u=e.match(/Bonus de (.+)/i);if(u){const d=u[1],i=a.find(o=>o.id===d);if(i)return Math.floor(n(i)/10)}return 1}function m(c,a,e){return{...c,label:s(c),max:a.max,maxCalculated:l(a,e),total:t(c),addCharacteristic:a.addCharacteristic,addSkill:a.addSkill,addMagic:a.addMagic,addTalent:a.addTalent}}function T(c,a,e){return c.map(r=>{const u=a(r.id);return u?m(r,u,e):null}).filter(r=>r!==null)}function h(c,a){return a?{...c,label:a.label,type:a.type,subType:a.subType,enc:a.enc,totalEnc:a.enc*c.quantity,melee:a.type==="melee"?{reach:String(a.reach??""),damage:a.damage??"",qualities:a.qualities}:void 0,ranged:a.type==="ranged"?{reach:Number(a.reach??0),damage:a.damage??"",qualities:a.qualities}:void 0,armor:a.type==="armor"?{loc:a.loc??"",pa:a.pa??0,qualities:a.qualities}:void 0,vehicle:a.type==="vehicle"?{carry:a.carry??0,mode:a.mode??"",toughness:a.toughness??0,wounds:a.wounds??0}:void 0,carry:a.carry,price:{gold:a.gold,silver:a.silver,bronze:a.bronze},availability:a.availability,isCustom:!1}:{...c,label:c.id,type:"misc",enc:0,totalEnc:0,isCustom:!0}}function v(c,a){return c.map(e=>h(e,a(e.id)))}function y(c,a){return{...c,label:a?.label??c.id,type:a?.type??"",subType:a?.subType,cn:a?.cn??0,range:a?.range??"",target:a?.target??"",duration:a?.duration??"",area:a?.area,desc:a?.desc}}function x(c,a){return c.map(e=>y(e,a(e.id)))}export{v as a,x as b,T as e,t as g};
